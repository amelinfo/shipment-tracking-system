# Shipment Tracking System

A microservices-based shipment tracking system with real-time notifications.

## üöÄ Quick Start

### Prerequisites
- Docker & Docker Compose
- Java 21
- Maven 3.9+

### Run the System
```bash
# 1. Clone the repository
git clone <repository>
cd shipment-tracking-system

# 2. Build all services
mvn clean install

# 3. Start all services with Docker
docker-compose up -d

# 4. Wait for services to start (30-60 seconds)
```

### Test the API
```bash
# Create a new shipment
curl -X POST http://localhost:8080/api/v1/trackings \
  -H "Content-Type: application/json" \
  -H "X-API-Key: demo-key" \
  -d '{"trackingId": "TEST001"}'

# Get shipment status
curl http://localhost:8080/api/v1/trackings/TEST001

# View all shipments (admin)
curl http://localhost:8080/api/v1/admin/trackings
```

## üèóÔ∏è Architecture

- **Tracking Service** (Port 8080): REST API for shipment tracking
- **Notification Service** (Port 8081): Processes shipment events and sends notifications  
- **Kafka**: Message broker for real-time event streaming
- **Prometheus** (Port 9090): Metrics collection
- **Grafana** (Port 3000): Dashboards and monitoring

## üìä Monitoring

- **Prometheus Metrics**: http://localhost:9090
- **Grafana Dashboards**: http://localhost:3000 (admin/admin)
- **Health Checks**:
  - Tracking Service: http://localhost:8080/actuator/health
  - Notification Service: http://localhost:8081/actuator/health

## üß™ Testing

### Run Unit Tests
```bash
# Test all modules
mvn clean test

# Test specific service
cd tracking-service && mvn test
cd notification-service && mvn test
```

### Integration Tests
```bash
# Run notification test script
cd notification-service/scripts
./test-notifications.ps1  # PowerShell
```

## üîß Configuration

### Environment Variables
- `KAFKA_BOOTSTRAP_SERVERS`: Kafka broker address (default: kafka:9092)
- `SPRING_PROFILES_ACTIVE`: Application profile (docker/local)
- `API_KEY`: Authentication key for API access

### Ports
| Service | Port | Purpose |
|---------|------|---------|
| Tracking Service | 8080 | REST API |
| Notification Service | 8081 | Health & Metrics |
| Kafka | 9092 | Message Broker |
| Prometheus | 9090 | Metrics Collection |
| Grafana | 3000 | Monitoring Dashboard |

## üìù API Documentation

### Tracking Endpoints
- `POST /api/v1/trackings` - Create/update shipment
- `GET /api/v1/trackings/{id}` - Get shipment status
- `GET /api/v1/admin/trackings` - List all shipments (admin)

### Health & Metrics
- `GET /actuator/health` - Service health check
- `GET /actuator/metrics` - Application metrics
- `GET /actuator/prometheus` - Prometheus metrics

## üõ†Ô∏è Development

### Local Development
```bash
# Start only infrastructure (Kafka, Prometheus, Grafana)
docker-compose up -d kafka prometheus grafana

# Run services locally
cd tracking-service && mvn spring-boot:run
cd notification-service && mvn spring-boot:run
```

### Project Structure
```
shipment-tracking-system/
‚îú‚îÄ‚îÄ common/                 # Shared models and utilities
‚îú‚îÄ‚îÄ tracking-service/       # REST API service
‚îú‚îÄ‚îÄ notification-service/   # Event processing service
‚îú‚îÄ‚îÄ docker-compose.yml      # Container orchestration
‚îî‚îÄ‚îÄ README.md              # This file
```

## üö® Troubleshooting

### Common Issues

**Services won't start:**
```bash
# Check container logs
docker-compose logs tracking-service
docker-compose logs notification-service

# Restart services
docker-compose restart
```

**Kafka connection issues:**
```bash
# Verify Kafka is running
docker-compose logs kafka

# Check network connectivity
docker-compose exec tracking-service ping kafka
```

**Build failures:**
```bash
# Clean and rebuild
mvn clean install -U

# Skip tests if needed
mvn clean install -DskipTests
```

## üìÑ License

MIT License - see LICENSE file for details